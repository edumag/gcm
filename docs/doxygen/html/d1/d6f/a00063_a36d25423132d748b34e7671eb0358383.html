<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>gcm: TemaGcm\construir_css</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />

<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
</script>
<link rel="search" href="../../search-opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="gcm"/>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">gcm
   &#160;<span id="projectnumber">3</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generado por Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Buscar');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Página&#160;principal</span></a></li>
      <li><a href="../../pages.html"><span>Páginas&#160;relacionadas</span></a></li>
      <li><a href="../../modules.html"><span>Módulos</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Estructuras&#160;de&#160;Datos</span></a></li>
      <li><a href="../../files.html"><span>Archivos</span></a></li>
      <li><a href="../../dirs.html"><span>Directorios</span></a></li>
      <li><a href="../../examples.html"><span>Ejemplos</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="../../search.php" method="get">
              <img id="MSearchSelect" src="../../search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Buscar" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
      </li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="../../d1/d6f/a00063.html">TemaGcm</a>      </li>
    </ul>
  </div>
</div>
<div class="contents">
<table cellspacing="0" cellpadding="0" border="0">
  <tr>
   <td valign="top">
      <div class="navtab">
        <table>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d6f/a00063_a5629ba8c527bcc9469cf12a47264447b.html#a5629ba8c527bcc9469cf12a47264447b">$colores</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d6f/a00063_a44249bbbacc7cc54aac0d745ef7db972.html#a44249bbbacc7cc54aac0d745ef7db972">$colores_faltantes</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d6f/a00063_a938f0c03ea09d13b4aef299d221bf779.html#a938f0c03ea09d13b4aef299d221bf779">$ficheros</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d6f/a00063_abbb988ebf9b4491082c9df0ec6881e9b.html#abbb988ebf9b4491082c9df0ec6881e9b">__construct</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d6f/a00063_a4038d3613f3edead0e69e3588d588825.html#a4038d3613f3edead0e69e3588d588825">color</a></td></tr>
          <tr><td class="navtab"><a class="qindexHL" href="../../d1/d6f/a00063_a36d25423132d748b34e7671eb0358383.html#a36d25423132d748b34e7671eb0358383">construir_css</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d6f/a00063_a5ae9b6b4025b3f0a2f08be7378352d99.html#a5ae9b6b4025b3f0a2f08be7378352d99">construir_js</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d6f/a00063_aacf954fc8b6e1528e8b649dead1da22d.html#aacf954fc8b6e1528e8b649dead1da22d">devolver_colores_faltantes</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d6f/a00063_a9483c8a51dfcddb2ceabf6b98d9779de.html#a9483c8a51dfcddb2ceabf6b98d9779de">icono</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d6f/a00063_ae8d8bc8bba6866ed46062a4aefcba8c8.html#ae8d8bc8bba6866ed46062a4aefcba8c8">incluir_javascript</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="../../d1/d6f/a00063_a298996eb77204ec8510eac42cbb50eb3.html#a298996eb77204ec8510eac42cbb50eb3">ruta</a></td></tr>
        </table>
      </div>
   </td>
   <td valign="top" class="mempage">
<a class="anchor" id="a36d25423132d748b34e7671eb0358383"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d6f/a00063_a36d25423132d748b34e7671eb0358383.html#a36d25423132d748b34e7671eb0358383">construir_css</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Construcción del archivo css para proyectos. </p>
<p>Cojemos todos los ficheros css del tema y generamos el archivo css del proyecto</p>
<p>Si se detecta que se esta pasando mediante proyectos.css?css=contenido se genera el css solo con el contenido. Eto va muy bien para que tiny recoga los css y los vea como los css principales presentando la misma imagen que cuando estamos viendo.</p>
<p>Si encontramos un archivo llamado variables.php dentro de la carpeta del tema lo incluimos antes de los css para que puedan utilizar las variables generadas. Esto lo utilizamos por ejemplo para cambiar la imagen de fondo según la sección en la que estamos.</p>
<dl class="section return"><dt>Devuelve:</dt><dd>string Con el código css </dd></dl>

<p>Definición en la línea <a class="el" href="../../da/ddb/a00145_source.html#l00119">119</a> del archivo <a class="el" href="../../da/ddb/a00145_source.html">TemaGcm.php</a>.</p>

<p>Hace referencia a <a class="el" href="../../d8/d53/a00081_source.html#l00027">$gcm</a> y <a class="el" href="../../d1/dd6/a00108_source.html#l00945">minimizar_css()</a>.</p>
<div class="fragment"><pre class="fragment">                            {

      global <a class="code" href="../../d8/d53/a00081_a19a0c049e76bf73f0a16f04e31cfbe86.html#a19a0c049e76bf73f0a16f04e31cfbe86" title="Instancia de Gcm.">$gcm</a>;

      echo <span class="stringliteral">&quot;/* Archivo generado por &quot;</span>.__CLASS__.<span class="stringliteral">&quot; */\n\n&quot;</span>;

      <span class="comment">// Incluimos archivo de variables</span>

      $fich_variables = dirname($this-&gt;ficheros[<span class="stringliteral">&#39;css&#39;</span>][<span class="stringliteral">&#39;temas/css/body.css&#39;</span>]).<span class="stringliteral">&#39;/../../../variables.php&#39;</span>;

      <span class="keywordflow">if</span> ( file_exists( $fich_variables ) ) include ($fich_variables);


      <span class="comment">// Si se nos pide un css concreto añadimos solo el body.css + el css que se pide</span>

      <span class="keywordflow">if</span> ( isset($_GET[<span class="stringliteral">&#39;css&#39;</span>]) &amp;&amp; !empty ($_GET[<span class="stringliteral">&#39;css&#39;</span>]) ) {

         $css = $_GET[<span class="stringliteral">&#39;css&#39;</span>];

         echo <span class="stringliteral">&quot;\n/* body */\n&quot;</span>;
         include($this-&gt;ficheros[<span class="stringliteral">&#39;css&#39;</span>][<span class="stringliteral">&#39;temas/css/body.css&#39;</span>]);
         echo <span class="stringliteral">&quot;\n/* css especifico: &quot;</span> . $css . <span class="stringliteral">&quot; */\n\n&quot;</span>;
         $incluir = $this-&gt;ficheros[<span class="stringliteral">&#39;css&#39;</span>][$css];
         <span class="keywordflow">if</span> ( $incluir ) {
            include($incluir);
         } <span class="keywordflow">else</span> {
            <span class="comment">// registrar(__FILE__,__LINE__,&#39;Archivo css no encontrado: [&#39;.$_GET[&#39;css&#39;].&#39;]&#39;,&#39;ERROR&#39;);</span>
            trigger_error(<span class="stringliteral">&#39;Archivo css no encontrado: [&#39;</span>.$_GET[<span class="stringliteral">&#39;css&#39;</span>].<span class="charliteral">&#39;]&#39;</span>,E_USER_ERROR);
            }
         echo <span class="stringliteral">&quot;\n&quot;</span>;

      } <span class="keywordflow">else</span> {
         
         echo <span class="stringliteral">&quot;\n/* fichero:&quot;</span>.$this-&gt;ficheros[<span class="stringliteral">&#39;css&#39;</span>][<span class="stringliteral">&#39;temas/css/body.css&#39;</span>].<span class="stringliteral">&quot;: */\n&quot;</span>;
         include($this-&gt;ficheros[<span class="stringliteral">&#39;css&#39;</span>][<span class="stringliteral">&#39;temas/css/body.css&#39;</span>]);
         echo <span class="stringliteral">&quot;\n/* acaba:&quot;</span>.$this-&gt;ficheros[<span class="stringliteral">&#39;css&#39;</span>][<span class="stringliteral">&#39;temas/css/body.css&#39;</span>].<span class="stringliteral">&quot;: */\n&quot;</span>;

         <span class="keywordflow">foreach</span> ( $this-&gt;ficheros[<span class="stringliteral">&#39;css&#39;</span>] as $llave =&gt; $fichero) {

            <span class="keywordflow">if</span> ( $llave != <span class="stringliteral">&#39;temas/css/body.css&#39;</span> ) {
               echo <span class="stringliteral">&quot;\n/* fichero:&quot;</span>.$llave.<span class="stringliteral">&quot;: */\n&quot;</span>;
               include($fichero);
               echo <span class="stringliteral">&quot;\n/* acaba:&quot;</span>.$llave.<span class="stringliteral">&quot;: */\n&quot;</span>;
               }

            }

         }

      $SALIDA = ob_get_contents();
      ob_end_clean();

      <span class="keywordflow">if</span> ( GCM_DEBUG ) {
         <span class="keywordflow">return</span> $SALIDA;
      } <span class="keywordflow">else</span> {
         <span class="keywordflow">return</span> <a class="code" href="../../d1/dd6/a00108_a647946886335918bcb6632e9189e9e01.html#a647946886335918bcb6632e9189e9e01" title="Minimizar archivos css.">minimizar_css</a>($SALIDA);
         }

      }
</pre></div>
</div>
</div>
    </td>
  </tr>
</table>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generado el Viernes, 23 de Noviembre de 2012 09:21:08 para gcm por &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
